(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d086e898"],{"0e51":function(t,e,o){"use strict";var s=o("99fd"),a=o.n(s);a.a},"1e4b":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",[t.$store.state.isShowAside?o("me-aside"):t._e(),o("el-container",{staticStyle:{"min-width":"800px"}},[o("el-header",{staticClass:"mini-im-header"},[o("me-heaser",{attrs:{title:"sdfsd"}})],1),o("el-main",{style:"background-color:"+t.workbenchBgColor},[o("router-view")],1)],1),o("EditProfile"),o("EditPassword")],1)},a=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-aside",{staticClass:"mini-im-aside",attrs:{width:"200px"}},[s("div",{staticClass:"mini-im-logo",on:{click:function(e){return t.$router.push({path:"/index"})}}},[t.$store.getters.systemInfo.logo?s("div",[s("img",{attrs:{src:t.$store.getters.systemInfo.logo+"?id="+Date.now(),alt:""}})]):s("div",[s("img",{attrs:{src:o("8e69"),alt:""}})])]),s("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.menuActive,"background-color":"#3e444a","text-color":"#fff",router:!0,"active-text-color":"#ffd04b"}},[s("el-menu-item",{attrs:{index:"/index"}},[s("i",{staticClass:"el-icon-s-home"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),s("el-menu-item",{attrs:{index:"/workbench"}},[s("el-badge",{staticStyle:{width:"100%"},attrs:{hidden:0==t.$store.getters.readCount,value:t.$store.getters.readCount,max:99}},[s("div",[s("i",{staticClass:"el-icon-s-platform"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("工作台")])])])],1),s("el-menu-item",{attrs:{index:"/knowledge"}},[s("i",{staticClass:"el-icon-reading"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("知识库")])]),s("el-menu-item",{attrs:{index:"/robot"}},[s("i",{staticClass:"el-icon-picture-outline-round"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("机器人")])]),s("el-menu-item",{attrs:{index:"/customer"}},[s("i",{staticClass:"el-icon-headset"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("客服管理")])]),s("el-menu-item",{attrs:{index:"/users"}},[s("i",{staticClass:"el-icon-user"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),s("el-menu-item",{attrs:{index:"/chat_record"}},[s("i",{staticClass:"el-icon-time"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("服务记录")])]),s("el-menu-item",{attrs:{index:"/system"}},[s("i",{staticClass:"el-icon-setting"}),s("span",{attrs:{slot:"title"},slot:"title"},[t._v("系统设置")])])],1),s("div",{staticClass:"fix-bottom"},[s("a",{attrs:{title:"去给作者Star",target:"_blank",href:"https://github.com/chenxianqi/kefu_server.git"}},[s("svg",{staticClass:"github-logo",attrs:{height:"23",viewBox:"0 0 16 16",version:"1.1",width:"23","aria-hidden":"true"}},[s("path",{attrs:{fill:"#fff","fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"}})]),s("span",[t._v(" Github")])])])],1)},n=[],r={name:"mini-im-aside",data:function(){return{menuActive:"/index"}},mounted:function(){this.setHeaderTitle()},methods:{setHeaderTitle:function(){var t;switch(this.menuActive=this.$route.path,this.menuActive){case"/index":t="首页";break;case"/workbench":t="工作台";break;case"/knowledge":t="知识库";break;case"/robot":t="机器人";break;case"/customer":t="客服管理";break;case"/users":t="用户管理";break;case"/system":t="系统设置";break}this.$store.commit("onChangeHeaserTitle",t)}},watch:{$route:function(){this.setHeaderTitle()}}},l=r,c=(o("0e51"),o("2877")),d=Object(c["a"])(l,i,n,!1,null,null,null),m=d.exports,u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-row",{attrs:{type:"flex",justify:"end",gutter:20}},[o("el-col",{attrs:{span:5}},[o("el-button",{staticClass:"mini-im-button",attrs:{type:"info",icon:t.$store.state.isShowAside?"el-icon-s-fold":"el-icon-s-unfold"},on:{click:function(e){return t.$store.commit("onChangeToggleAside",!t.$store.state.isShowAside)}}})],1),o("el-col",{attrs:{span:16}},[o("div",{staticClass:"mini-im-title"},[t._v(t._s(t.$store.state.heaserTitle))])]),o("el-col",{attrs:{span:5}},[o("el-row",{staticClass:"mini-im-dropdown",attrs:{type:"flex",justify:"end"}},[o("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[o("div",{staticClass:"el-dropdown-link"},[o("el-avatar",{staticClass:"mini-im-avatar",attrs:{size:25}},[o("img",{attrs:{src:t.$store.getters.avatar}})]),o("span",{staticStyle:{padding:"0 5px"}},[t._v(" "+t._s(t.$store.getters.nickname)+" ")]),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"a"}},[o("i",{staticClass:"el-icon-user icon"}),t._v("\n              修改资料\n            ")]),o("el-dropdown-item",{attrs:{command:"b"}},[o("i",{staticClass:"el-icon-unlock icon"}),t._v("\n              修改密码\n            ")]),o("el-dropdown-item",{attrs:{command:"c",divided:""}},[o("i",{staticClass:"el-icon-caret-right icon"}),t._v("\n              退出登录\n            ")])],1)],1)],1)],1)],1)},f=[],p=o("bc3a"),h=o.n(p),g={name:"mini-im-aside",data:function(){return{bgColor:"#ffffff"}},props:{title:String},methods:{logout:function(){var t=this;h.a.put("/admin/online/0"),h.a.get("/auth/logout").then((function(){t.$store.commit("onReset"),t.$store.commit("onChangeAdminInfo",null),t.$router.push({path:"/login"}),t.$mimcInstance.logout(),t.$store.commit("onIsLogin",!1),localStorage.clear()})).catch((function(e){t.$message.error("退出失败"),console.log(e)}))},handleCommand:function(t){var e=this;switch(t){case"a":this.$store.commit("onChangeEditDialogFormVisible",!0);break;case"b":this.$store.commit("onChangeEditPasswordDialogFormVisible",!0);break;case"c":this.$confirm("您确定要退出登录吗? ","温馨提示！",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"warning"}).then((function(){return e.logout()}));break}}}},b=g,v=(o("8a1c"),Object(c["a"])(b,u,f,!1,null,"7a297760",null)),w=v.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{width:"500px",title:"修改资料","show-close":!1,visible:t.$store.state.editDialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"editDialogFormVisible",e)}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"头像","label-width":t.formLabelWidth}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"mini-im-file-button",attrs:{title:"点击上传图片"}},[o("el-avatar",{attrs:{size:50,src:t.form.avatar||t.$store.state.avatar}}),o("input",{attrs:{onClick:"this.value = null",type:"file",accept:"image/*"},on:{change:t.changeFile}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isUploading,expression:"isUploading"}],staticClass:"mini-im-file-percent"},[o("span",[t._v(t._s(t.uploadPercent))])])],1)]),o("el-col",{attrs:{span:6}})],1)],1),o("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth}},[t._v("\n      "+t._s(t.form.username)+"\n    ")]),o("el-form-item",{attrs:{label:"昵称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入昵称",autocomplete:"off"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),o("el-form-item",{attrs:{label:"联系方式","label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入联系方式",autocomplete:"off"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),o("el-form-item",{attrs:{label:"自动回复语","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",placeholder:"请输入自动回复语,不支持emoji，请使用简单语句描述",autocomplete:"off"},model:{value:t.form.auto_reply,callback:function(e){t.$set(t.form,"auto_reply",e)},expression:"form.auto_reply"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保 存")])],1)],1)},$=[],k=o("fb21"),x={name:"mini-im-edit-profile",data:function(){return{form:{id:"",avatar:"",username:"",nickname:"",phone:"",auto_reply:""},formLabelWidth:"90px",isUploading:!1,uploadPercent:""}},computed:{adminInfo:function(){return this.$store.state.adminInfo}},methods:{closeModal:function(){this.$store.commit("onChangeEditDialogFormVisible",!1)},save:function(){var t=this,e=this.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});h.a.put("/admin",this.form).then((function(o){console.log(o),e.close(),t.$message.success("资料修改成功"),t.closeModal(),t.$store.dispatch("ON_GET_ME")})).catch((function(o){e.close(),t.$message.error(o.response.data.message)}))},changeFile:function(t){var e=this;Object(k["a"])({file:t.target.files[0],progress:function(t){e.isUploading=!0,e.uploadPercent=t+"%"},success:function(t){e.isUploading=!1,e.uploadPercent="",e.$message.success("上传成功");var o=e.$store.getters.uploadToken.host+"/"+t;e.form.avatar=o},error:function(t){e.isUploading=!1,e.uploadPercent="",e.$message.error(t.message)}})}},watch:{adminInfo:function(){if(this.adminInfo){var t=this.$store.state.adminInfo,e=t.avatar,o=t.username,s=t.nickname,a=t.phone,i=t.id,n=t.auto_reply;this.form={avatar:e,username:o,nickname:s,phone:a,id:i,auto_reply:n}}}}},C=x,y=(o("5d0e"),Object(c["a"])(C,_,$,!1,null,"0d4bcba3",null)),E=y.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{width:"500px",title:"修改密码","show-close":!1,visible:t.$store.state.editPasswordDialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.$store.state,"editPasswordDialogFormVisible",e)}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"旧密码","label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入旧密码",autocomplete:"off"},model:{value:t.form.old_password,callback:function(e){t.$set(t.form,"old_password",e)},expression:"form.old_password"}})],1),o("el-form-item",{attrs:{label:"新密码","label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入新密码",autocomplete:"off"},model:{value:t.form.new_password,callback:function(e){t.$set(t.form,"new_password",e)},expression:"form.new_password"}})],1),o("el-form-item",{attrs:{label:"确认密码","label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请再次输入新密码",autocomplete:"off"},model:{value:t.form.enter_password,callback:function(e){t.$set(t.form,"enter_password",e)},expression:"form.enter_password"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保 存")])],1)],1)},A=[],F={name:"mini-im-create-knowledge",data:function(){return{form:{old_password:"",new_password:"",enter_password:""},robotSwitch:!0,formLabelWidth:"80px"}},props:{dialogFormVisible:Boolean},mounted:function(){},methods:{closeModal:function(){this.resize(),this.$store.commit("onChangeEditPasswordDialogFormVisible",!1)},save:function(){var t=this,e=this.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});h.a.put("/admin/password",this.form).then((function(o){console.log(o),e.close(),t.$message.success("资料修改成功"),t.closeModal(),t.resize()})).catch((function(o){e.close(),t.$message.error(o.response.data.message)}))},resize:function(){this.form={old_password:"",new_password:"",enter_password:""}}}},L=F,I=Object(c["a"])(L,P,A,!1,null,"5987490c",null),M=I.exports,S={name:"home",components:{MeAside:m,MeHeaser:w,EditProfile:E,EditPassword:M},computed:{workbenchBgColor:function(){return"/workbench"==this.$route.path?this.$store.getters.workbenchBgColor:"#ffffff"}}},T=S,W=(o("c5f8"),Object(c["a"])(T,s,a,!1,null,"61095d10",null));e["default"]=W.exports},"5d0e":function(t,e,o){"use strict";var s=o("710f"),a=o.n(s);a.a},"710f":function(t,e,o){},"8a1c":function(t,e,o){"use strict";var s=o("9aba"),a=o.n(s);a.a},"8e69":function(t,e,o){t.exports=o.p+"img/kefu_logo.9c308a55.png"},"98be":function(t,e,o){},"99fd":function(t,e,o){},"9aba":function(t,e,o){},c5f8:function(t,e,o){"use strict";var s=o("98be"),a=o.n(s);a.a}}]);
//# sourceMappingURL=chunk-d086e898.72fb38e4.js.map