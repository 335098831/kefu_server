{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.date.now.js","webpack:///./src/views/record/chats.vue?c35e","webpack:///./src/views/record/index.vue?54e8","webpack:///./src/views/record/chats.vue?93ce","webpack:///src/views/record/chats.vue","webpack:///./src/views/record/chats.vue?b9d8","webpack:///./src/views/record/chats.vue","webpack:///src/views/record/index.vue","webpack:///./src/views/record/index.vue?622e","webpack:///./src/views/record/index.vue?6f57","webpack:///./src/views/record/index.vue?6aa3"],"names":["$export","S","now","Date","getTime","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","staticStyle","ref","adminInfo","root","on","refreshRecord","model","value","callback","$$v","selectCustomerId","expression","_l","item","key","id","nickname","_e","pickerOptions","selectDate","isDeWeighting","isReception","directives","name","rawName","tableData","list","indexMethod","scopedSlots","_u","fn","scope","_s","serviceNickname","row","service_account","is_reception","$getPlatformItem","platform","title","$formatUnixDate","create_at","$event","openModal","total","page_on","handleSizeChange","handleCurrentChange","dialogFormVisible","selectUser","isMessageEnd","serviceAccount","messageRecord","user_account","onLoadMor","getMessageRecordLoading","staticRenderFns","loading","messages","length","index","class","from_account","userId","biz_type","seviceId","seviceNickname","userNickname","$robotNickname","$formatFromNowDate","timestamp","domProps","payload","replace","percent","to_account","JSON","parse","data","computed","seviceCurrentUser","$store","getters","props","Boolean","Array","String","Function","watch","component","moment","components","ChatsComponent","page_size","cid","is_de_weighting","date","customerData","disabledDate","time","shortcuts","text","onClick","picker","$emit","setTime","getMessageRecordPageSize","platformConfig","created","getAdmins","mounted","setTimeout","methods","val","getRecord","i","format","isFirstRequestMessageEnd","getMessageRecord","parseInt","window","Base64","decode","response","concat","console","log","error","getHistoryMessageRecord","chatBody","document","getElementById","scrollTop","scrollIntoBottom","height","clientHeight","scrollHeight","e"],"mappings":"qGACA,IAAIA,EAAU,EAAQ,QAEtBA,EAAQA,EAAQC,EAAG,OAAQ,CAAEC,IAAK,WAAc,OAAO,IAAIC,MAAOC,c,kCCHlE,yBAAyjB,EAAG,G,yCCA5jB,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAACF,EAAG,OAAO,CAACA,EAAG,IAAI,CAACE,YAAY,iBAAiBF,EAAG,OAAO,CAACG,MAAM,CAAC,KAAO,SAASC,KAAK,SAAS,CAACR,EAAIS,GAAG,cAAcL,EAAG,cAAcA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,OAAS,KAAK,CAACH,EAAG,SAAS,CAACM,YAAY,CAAC,MAAQ,UAAU,CAACN,EAAG,UAAU,CAACO,IAAI,OAAOJ,MAAM,CAAC,cAAc,UAAU,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,MAA8B,GAAtBP,EAAIY,UAAUC,KAAY,OAAS,WAAW,IAAI,GAA0B,GAAtBb,EAAIY,UAAUC,KAAWT,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,IAAI,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,SAASO,GAAG,CAAC,OAASd,EAAIe,eAAeC,MAAM,CAACC,MAAOjB,EAAoB,iBAAEkB,SAAS,SAAUC,GAAMnB,EAAIoB,iBAAiBD,GAAKE,WAAW,qBAAqBrB,EAAIsB,GAAItB,EAAgB,cAAE,SAASuB,GAAM,OAAOnB,EAAG,YAAY,CAACoB,IAAID,EAAKE,GAAGlB,MAAM,CAAC,MAAQgB,EAAKG,SAAS,MAAQH,EAAKE,SAAQ,IAAI,GAAGzB,EAAI2B,KAAKvB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,MAAM,CAACH,EAAG,iBAAiB,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAO,OAAO,YAAc,OAAO,iBAAiBP,EAAI4B,eAAed,GAAG,CAAC,OAASd,EAAIe,eAAeC,MAAM,CAACC,MAAOjB,EAAc,WAAEkB,SAAS,SAAUC,GAAMnB,EAAI6B,WAAWV,GAAKE,WAAW,iBAAiB,GAAGjB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,MAAM,CAACH,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,SAAS,OAAS,IAAIO,GAAG,CAAC,OAASd,EAAIe,eAAeC,MAAM,CAACC,MAAOjB,EAAiB,cAAEkB,SAAS,SAAUC,GAAMnB,EAAI8B,cAAcX,GAAKE,WAAW,oBAAoB,GAAGjB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,MAAM,CAACH,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,WAAW,OAAS,IAAIO,GAAG,CAAC,OAASd,EAAIe,eAAeC,MAAM,CAACC,MAAOjB,EAAe,YAAEkB,SAAS,SAAUC,GAAMnB,EAAI+B,YAAYZ,GAAKE,WAAW,kBAAkB,IAAI,IAAI,GAAGjB,EAAG,WAAW,CAAC4B,WAAW,CAAC,CAACC,KAAK,UAAUC,QAAQ,YAAYjB,MAAOjB,EAAW,QAAEqB,WAAW,YAAYX,YAAY,CAAC,MAAQ,QAAQH,MAAM,CAAC,KAAOP,EAAImC,UAAUC,OAAO,CAAChC,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,QAAQ,MAAQP,EAAIqC,YAAY,MAAQ,MAAM,MAAQ,QAAQjC,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,kBAAkB,MAAQ,QAAQ+B,YAAYtC,EAAIuC,GAAG,CAAC,CAACf,IAAI,UAAUgB,GAAG,SAASC,GAAO,MAAO,CAACrC,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI2C,gBAAgBF,EAAMG,IAAIC,4BAA4BzC,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,WAAW,MAAQ,QAAQ+B,YAAYtC,EAAIuC,GAAG,CAAC,CAACf,IAAI,UAAUgB,GAAG,SAASC,GAAO,MAAO,CAACrC,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,YAAY,CAACP,EAAIS,GAAGT,EAAI0C,GAAGD,EAAMG,IAAIlB,oBAAoBtB,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,eAAe,MAAQ,SAAS+B,YAAYtC,EAAIuC,GAAG,CAAC,CAACf,IAAI,UAAUgB,GAAG,SAASC,GAAO,MAAO,CAACrC,EAAG,SAAS,CAAC4B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASjB,MAAiC,GAA1BwB,EAAMG,IAAIE,aAAmBzB,WAAW,gCAAgCd,MAAM,CAAC,KAAO,WAAW,CAACP,EAAIS,GAAG,SAASL,EAAG,SAAS,CAAC4B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASjB,MAAiC,GAA1BwB,EAAMG,IAAIE,aAAmBzB,WAAW,gCAAgCd,MAAM,CAAC,KAAO,YAAY,CAACP,EAAIS,GAAG,gBAAgBL,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,mBAAmB,MAAQ,QAAQ,CAAC,CAACH,EAAG,OAAO,CAACJ,EAAIS,GAAG,aAAa,GAAGL,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,WAAW,MAAQ,SAAS+B,YAAYtC,EAAIuC,GAAG,CAAC,CAACf,IAAI,UAAUgB,GAAG,SAASC,GAAO,MAAO,CAACrC,EAAG,SAAS,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI+C,iBAAiBN,EAAMG,IAAII,UAAUC,iBAAiB7C,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,YAAY,MAAQ,QAAQ+B,YAAYtC,EAAIuC,GAAG,CAAC,CAACf,IAAI,UAAUgB,GAAG,SAASC,GAAO,MAAO,CAACzC,EAAIS,GAAG,aAAaT,EAAI0C,GAAG1C,EAAIkD,gBAAgBT,EAAMG,IAAIO,UAAW,wBAAwB,mBAAmB/C,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,YAAY,MAAQ,SAAS,MAAQ,KAAK,MAAQ,OAAO+B,YAAYtC,EAAIuC,GAAG,CAAC,CAACf,IAAI,UAAUgB,GAAG,SAASC,GAAO,MAAO,CAACrC,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQO,GAAG,CAAC,MAAQ,SAASsC,GAAQ,OAAOpD,EAAIqD,UAAUZ,MAAU,CAACzC,EAAIS,GAAG,kBAAkB,GAAGL,EAAG,SAAS,CAACM,YAAY,CAAC,aAAa,QAAQH,MAAM,CAAC,KAAO,OAAO,QAAU,kBAAkB,CAACH,EAAG,OAAO,CAACM,YAAY,CAAC,MAAQ,OAAO,YAAY,SAAS,CAACV,EAAIS,GAAG,MAAMT,EAAI0C,GAAG1C,EAAImC,UAAUmB,OAAO,SAASlD,EAAG,gBAAgB,CAACG,MAAM,CAAC,WAAa,GAAG,OAAS,2BAA2B,eAAeP,EAAImC,UAAUoB,QAAQ,aAAa,CAAC,EAAG,GAAI,GAAI,IAAI,MAAQvD,EAAImC,UAAUmB,OAAOxC,GAAG,CAAC,cAAcd,EAAIwD,iBAAiB,iBAAiBxD,EAAIyD,wBAAwB,GAAGrD,EAAG,YAAY,CAACG,MAAM,CAAC,QAAUP,EAAI0D,mBAAmB5C,GAAG,CAAC,iBAAiB,SAASsC,GAAQpD,EAAI0D,kBAAkBN,KAAU,CAAChD,EAAG,MAAM,CAACE,YAAY,eAAeC,MAAM,CAAC,KAAO,SAASC,KAAK,SAAS,CAACJ,EAAG,MAAM,CAACM,YAAY,CAAC,MAAQ,SAAS,CAACN,EAAG,OAAO,CAACM,YAAY,CAAC,MAAQ,YAAY,CAACV,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI2C,gBAAgB3C,EAAI2D,WAAWd,qBAAqB7C,EAAIS,GAAG,2BAA2BL,EAAG,OAAO,CAACM,YAAY,CAAC,MAAQ,YAAY,CAACV,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI2D,WAAWjC,aAAa1B,EAAIS,GAAG,+BAA+BL,EAAG,MAAM,CAACO,IAAI,WAAWL,YAAY,wBAAwBC,MAAM,CAAC,GAAK,aAAa,CAACH,EAAG,iBAAiB,CAACG,MAAM,CAAC,aAAeP,EAAI4D,aAAa,SAAW5D,EAAI6D,eAAe,eAAiB7D,EAAI2C,gBAAgB3C,EAAI2D,WAAWd,iBAAiB,SAAW7C,EAAI8D,cAAc1B,KAAK,OAASpC,EAAI2D,WAAWI,aAAa,aAAe/D,EAAI2D,WAAWjC,SAAS,UAAY1B,EAAIgE,UAAU,QAAUhE,EAAIiE,4BAA4B,MAAM,IAC5iKC,EAAkB,G,iCCDlB,EAAS,WAAa,IAAIlE,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,MAAM,CAAC4B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASjB,MAAOjB,EAAW,QAAEqB,WAAW,YAAYf,YAAY,WAAW,CAACF,EAAG,IAAI,CAACE,YAAY,oBAAoBF,EAAG,OAAO,CAACJ,EAAIS,GAAG,gBAAgBL,EAAG,YAAY,CAAC4B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASjB,MAAOjB,EAAgB,aAAEqB,WAAW,iBAAiBd,MAAM,CAAC,KAAO,OAAO,SAAW,GAAG,KAAO,0BAA0B,CAACP,EAAIS,GAAG,gBAAkBT,EAAI4D,cAAiB5D,EAAImE,QAA4HnE,EAAI2B,KAAvHvB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,mBAAmBO,GAAG,CAAC,MAAQd,EAAIgE,YAAY,CAAChE,EAAIS,GAAG,iBAA0B,GAAGL,EAAG,MAAM,CAACE,YAAY,4BAA4B,CAACF,EAAG,MAAM,CAAC4B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASjB,MAAOjB,EAAIoE,SAASC,QAAU,IAAMrE,EAAImE,QAAS9C,WAAW,qCAAqCf,YAAY,WAAW,CAACF,EAAG,IAAI,CAACE,YAAY,iBAAiBF,EAAG,OAAO,CAACJ,EAAIS,GAAG,mBAAmBT,EAAIsB,GAAItB,EAAY,UAAE,SAASuB,EAAK+C,GAAO,OAAOlE,EAAG,MAAM,CAACoB,IAAI8C,EAAMhE,YAAY,2BAA2BiE,MAAM,CAAC,KAAQhD,EAAKiD,cAAgBxE,EAAIyE,SAAS,CAAmB,QAAjBlD,EAAKmD,UAAuC,SAAjBnD,EAAKmD,UAAwC,aAAjBnD,EAAKmD,UAA4C,kBAAjBnD,EAAKmD,SAA8B,CAACtE,EAAG,MAAM,CAACE,YAAY,aAAa,CAAEiB,EAAKiD,cAAgBxE,EAAI2E,SAAUvE,EAAG,OAAO,CAACJ,EAAIS,GAAG,mBAAmBT,EAAI0C,GAAG1C,EAAI4E,gBAAgB,oBAAqBrD,EAAKiD,cAAgBxE,EAAIyE,OAAQrE,EAAG,OAAO,CAACJ,EAAIS,GAAG,mBAAmBT,EAAI0C,GAAG1C,EAAI6E,cAAc,oBAAoBzE,EAAG,OAAO,CAACA,EAAG,OAAO,CAACM,YAAY,CAAC,YAAY,OAAO,MAAQ,SAAS,CAACV,EAAIS,GAAG,WAAWT,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI8E,eAAevD,EAAKiD,eAAe,oBAAoBpE,EAAG,KAAK,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI+E,mBAAmBxD,EAAKyD,kBAAkBhF,EAAI2B,KAAuB,QAAjBJ,EAAKmD,SAAoB,CAACtE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,OAAO,CAAC6E,SAAS,CAAC,UAAYjF,EAAI0C,GAAGnB,EAAK2D,QAAQC,QAAQ,OAAQ,iBAAiBnF,EAAI2B,KAAuB,SAAjBJ,EAAKmD,SAAqB,CAACtE,EAAG,MAAM,CAACE,YAAY,SAAS,CAAEiB,EAAK6D,SAA2B,KAAhB7D,EAAK6D,QAAgBhF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,IAAI,CAACE,YAAY,oBAAoBF,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAI0C,GAAGnB,EAAK6D,SAAS,SAASpF,EAAI2B,KAAKvB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMgB,EAAK2D,QAAQ,QAAU,YAAYlF,EAAI2B,KAAuB,YAAjBJ,EAAKmD,SAAwB,CAACtE,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAI0C,GAAGnB,EAAK2D,YAAY9E,EAAG,KAAK,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI+E,mBAAmBxD,EAAKyD,kBAAkBhF,EAAI2B,KAAuB,OAAjBJ,EAAKmD,SAAmB,CAACtE,EAAG,MAAM,CAACE,YAAY,UAAU,CAAEiB,EAAK8D,YAAcrF,EAAIY,UAAUa,GAAIrB,EAAG,OAAO,CAACJ,EAAIS,GAAG,YAAYL,EAAG,OAAO,CAACJ,EAAIS,GAAG,aAAaL,EAAG,KAAK,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI+E,mBAAmBxD,EAAKyD,kBAAkBhF,EAAI2B,KAAuB,WAAjBJ,EAAKmD,SAAuB,CAACtE,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,OAAO,CAACJ,EAAIS,GAAGT,EAAI0C,GAAGnB,EAAK2D,YAAY9E,EAAG,KAAK,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI+E,mBAAmBxD,EAAKyD,kBAAkBhF,EAAI2B,KAAuB,UAAjBJ,EAAKmD,SAAsB,CAACtE,EAAG,MAAM,CAACE,YAAY,UAAU,CAAEiB,EAAKiD,cAAgBxE,EAAIY,UAAUa,GAAIrB,EAAG,OAAO,CAACJ,EAAIS,GAAG,cAAcL,EAAG,OAAO,CAACJ,EAAIS,GAAG,eAAeL,EAAG,KAAK,CAACJ,EAAIS,GAAGT,EAAI0C,GAAG1C,EAAI+E,mBAAmBxD,EAAKyD,kBAAkBhF,EAAI2B,KAAuB,aAAjBJ,EAAKmD,SAAyB,CAACtE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIS,GAAG,qBAAqBT,EAAIsB,GAAIgE,KAAKC,MAAMhE,EAAK2D,UAAU,SAAS3D,EAAK+C,GAAO,OAAOlE,EAAG,MAAM,CAACoB,IAAI8C,EAAMhE,YAAY,QAAQ,CAACN,EAAIS,GAAG,qBAAqBT,EAAI0C,GAAG4B,EAAM,GAAG,IAAItE,EAAI0C,GAAGnB,EAAK0B,OAAO,0BAAyB,MAAMjD,EAAI2B,MAAM,OAAM,IACn+G,EAAkB,GCyGtB,GACEM,KAAM,kBACNuD,KAFF,WAGI,MAAO,IAETC,SAAU,CACRC,kBADJ,WAEM,OAAOzF,KAAK0F,OAAOC,QAAQF,mBAAqB,IAElD9E,UAJJ,WAKM,OAAOX,KAAK0F,OAAOC,QAAQhF,WAAa,KAG5CiF,MAAO,CACL1B,QAAS2B,QACTlC,aAAckC,QACd1B,SAAU2B,MACVtB,OAAQuB,OACRnB,aAAcmB,OACdrB,SAAUqB,OACVpB,eAAgBoB,OAChBhC,UAAWiC,UAEbC,MAAF,CACI9B,SADJ,WACA,WACA,uBACQ,EAAR,oBACA,QCrIiY,I,wBCQ7X+B,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCgHXC,EAAS,EAAb,QAEA,GACEnE,KAAM,QACNoE,WAAF,CACIC,eAAJ,GAEEd,KALF,WAMI,MAAO,CACLrB,SAAS,EACTrC,eAAe,EACfC,aAAa,EACbF,WAAYhC,KAAKD,MACjBuC,UAAW,CACTC,KAAM,GACNmB,QAAS,EACTgD,UAAW,GACXC,IAAK,EACLlD,MAAO,EACPmD,iBAAiB,EACjBC,KAAM,IAERC,aAAc,CAAC,CAArB,qBACMvF,iBAAkB,EAClByC,eAAgB,IAChBF,WAAY,GACZ/B,cAAe,CACbgF,aADR,SACA,GACU,OAAOC,EAAK/G,UAAYD,KAAKD,OAE/BkH,UAAW,CAAC,CACVC,KAAM,KACNC,QAFV,SAEA,GACYC,EAAOC,MAAM,OAAQ,IAAIrH,QAErC,CACUkH,KAAM,KACNC,QAFV,SAEA,GACY,IAAZ,WACYN,EAAKS,QAAQT,EAAK5G,UAAY,OAC9BmH,EAAOC,MAAM,OAAQR,KAEjC,CACUK,KAAM,MACNC,QAFV,SAEA,GACY,IAAZ,WACYN,EAAKS,QAAQT,EAAK5G,UAAY,QAC9BmH,EAAOC,MAAM,OAAQR,OAI3B9C,cAAc,EAGdK,yBAAyB,EACzBmD,yBAA0B,GAC1B1D,mBAAmB,EACnBI,cAAe,CACb1B,KAAM,IAER,0BAAN,IAKEqD,SAAU,CACR4B,eADJ,WAEM,OAAOpH,KAAK0F,OAAOC,QAAQyB,gBAE7BzG,UAJJ,WAKM,OAAOX,KAAK0F,OAAOC,QAAQhF,YAG/B0G,QAvEF,WAwEIrH,KAAKsH,aAEPC,QA1EF,WA0EA,WACIC,YAAW,WACT,EAAN,eACA,MAEEC,QAAS,CAEPrF,YAFJ,SAEA,GACM,OAAQpC,KAAKkC,UAAUoB,QAAU,GAAKtD,KAAKkC,UAAUoE,UAAYjC,EAAvE,GAGId,iBANJ,SAMA,GACMvD,KAAKkC,UAAUoE,UAAYoB,EAC3B1H,KAAK2H,aAGPnE,oBAXJ,SAWA,GACMxD,KAAKkC,UAAUoB,QAAUoE,EACzB1H,KAAK2H,aAGPjF,gBAhBJ,SAgBA,GAEM,IADA,IAAN,KACA,mCACQ,GAAR,4BACUjB,EAAWzB,KAAK0G,aAAakB,GAAGnG,SAChC,MAGJ,OAAOA,GAGT6F,UA3BJ,WA2BA,WACM,EAAN,yDACA,kBACQ,EAAR,wDAEA,mBACQ,EAAR,4CAIIK,UArCJ,SAqCA,cACM3H,KAAKkE,SAAU,EACrB,8BAFA,MAGA,iBAHA,EAGA,UAHA,EAGA,UACM,EAAN,qCACQZ,QAAR,EACQgD,UAAR,EACQC,IAAKvG,KAAKmB,iBACVsF,KAAMN,EAAOnG,KAAK4B,YAAYiG,OAAO,cACrCrB,gBAAiBxG,KAAK6B,cACtBgB,aAAc7C,KAAK8B,cAE3B,kBACQ,EAAR,WACQ,EAAR,yBAEA,mBACQ,EAAR,WACQ,EAAR,4CAIIhB,cA3DJ,WA4DMd,KAAK2H,aAGPvE,UA/DJ,SA+DA,GACMpD,KAAK4D,eAAiBpB,EAAMG,IAAIC,gBAChC5C,KAAK0D,WAAalB,EAAMG,IACxB3C,KAAK2D,cAAe,EACpB3D,KAAK8H,0BAA2B,EAChC9H,KAAKyD,mBAAoB,EACzBzD,KAAK6D,cAAgB,CACnB1B,KAAM,IAERnC,KAAK+H,oBAGPA,iBA3EJ,SA2EA,cACM/H,KAAKgE,yBAA0B,OACrC,OACQe,EAAY,GAEd,EAAN,wBACQ,UAAaA,EACb,UAAa/E,KAAKmH,yBAClB,QAAWa,SAAShI,KAAK4D,gBACzB,QAAWoE,SAAShI,KAAK0D,WAAWI,gBAE5C,kBACQ,EAAR,2BAEQ,IADA,IAAR,mBACA,mBACUK,EAASyD,GAAG3C,QAAUgD,OAAOC,OAAOC,OAAOhE,EAASyD,GAAG3C,SAEjE,sCACU,EAAV,6BAEA,mBACU,EAAV,0BACU,EAAV,qBAEUmD,EAAS7C,KAAKA,KAAKpD,KAAOgC,EAASkE,OAAO,EAApD,oBACU,EAAV,2BAEQb,YAAW,WAAnB,qCAEA,mBACQc,QAAQC,IAAIC,GACZ,EAAR,+BAIIC,wBA9GJ,SA8GA,cACMzI,KAAKgE,yBAA0B,OACrC,WAIM,EAAN,2BACQ,UAAae,EACb,UAAa/E,KAAKmH,yBAClB,QAAWa,SAAShI,KAAK4D,gBACzB,QAAWoE,SAAShI,KAAK0D,WAAWI,gBAE5C,kBAEQ,IADA,IAAR,mBACA,mBACUK,EAASyD,GAAG3C,QAAUgD,OAAOC,OAAOC,OAAOhE,EAASyD,GAAG3C,SAEzD,EAAR,2BACA,sCACU,EAAV,iBAGAmD,EAAA,8CACQ,EAAR,0BACQZ,YAAW,WAAnB,qCAEA,kBACQ,EAAR,8BAxBQxH,KAAK2D,cAAe,GA4BxBI,UA7IJ,WA8IA,+BACA,8BACQ/D,KAAKyI,wBAAwBzI,KAAK6D,cAAc1B,KAAK,GAAG4C,WAExD/E,KAAK+H,iBAAiB/H,KAAK6D,cAAc1B,KAAK,GAAG4C,WAEnDyC,YAAW,WACT,IAAIkB,EAAWC,SAASC,eAAe,YACvCF,EAASG,UAAY,MAC7B,MAGIC,iBA1JJ,WA2JM,IACEtB,YAAW,WACT,IAAIkB,EAAWC,SAASC,eAAe,YACvC,GAAV,EAAU,CACA,IAAIG,EAASL,EAASM,aAClBC,EAAeP,EAASO,aAC5BP,EAASG,UAAYI,EAA/B,KACA,IACA,SACQX,QAAQC,IAAIW,OCxX6W,ICQ7X,G,UAAY,eACd,EACApJ,EACAmE,GACA,EACA,KACA,KACA,OAIa,e,yFCnBf,yBAAiiB,EAAG","file":"js/chunk-24f148c5.c8ca9ae1.js","sourcesContent":["// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chats.vue?vue&type=style&index=0&id=26f02afa&scoped=true&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chats.vue?vue&type=style&index=0&id=26f02afa&scoped=true&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"record-page\"},[_c('div',{staticClass:\"record-mini-im-head\"},[_c('span',[_c('i',{staticClass:\"el-icon-time\"}),_c('span',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\"服务记录\")])])]),_c('el-divider'),_c('div',{staticClass:\"search\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{staticStyle:{\"width\":\"120px\"}},[_c('el-form',{ref:\"form\",attrs:{\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.adminInfo.root == 1 ? '按客服：' : '按日期：'}})],1)],1),(_vm.adminInfo.root == 1)?_c('el-col',{attrs:{\"span\":3}},[_c('el-select',{attrs:{\"placeholder\":\"请选择客服\"},on:{\"change\":_vm.refreshRecord},model:{value:(_vm.selectCustomerId),callback:function ($$v) {_vm.selectCustomerId=$$v},expression:\"selectCustomerId\"}},_vm._l((_vm.customerData),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.nickname,\"value\":item.id}})}),1)],1):_vm._e(),_c('el-col',{attrs:{\"span\":5.5}},[_c('el-date-picker',{attrs:{\"align\":\"right\",\"type\":\"date\",\"placeholder\":\"选择日期\",\"picker-options\":_vm.pickerOptions},on:{\"change\":_vm.refreshRecord},model:{value:(_vm.selectDate),callback:function ($$v) {_vm.selectDate=$$v},expression:\"selectDate\"}})],1),_c('el-col',{attrs:{\"span\":5.5}},[_c('el-checkbox',{attrs:{\"label\":\"去重目标客户\",\"border\":\"\"},on:{\"change\":_vm.refreshRecord},model:{value:(_vm.isDeWeighting),callback:function ($$v) {_vm.isDeWeighting=$$v},expression:\"isDeWeighting\"}})],1),_c('el-col',{attrs:{\"span\":5.5}},[_c('el-checkbox',{attrs:{\"label\":\"只显示未接待客户\",\"border\":\"\"},on:{\"change\":_vm.refreshRecord},model:{value:(_vm.isReception),callback:function ($$v) {_vm.isReception=$$v},expression:\"isReception\"}})],1)],1)],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData.list}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"index\":_vm.indexMethod,\"label\":\"#序号\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"prop\":\"service_account\",\"label\":\"接待客服\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.serviceNickname(scope.row.service_account)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"nickname\",\"label\":\"目标客户\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(_vm._s(scope.row.nickname))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"is_reception\",\"label\":\"是否已接待\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{directives:[{name:\"show\",rawName:\"v-show\",value:(scope.row.is_reception == 0),expression:\"scope.row.is_reception == 0\"}],attrs:{\"type\":\"danger\"}},[_vm._v(\"未接待\")]),_c('el-tag',{directives:[{name:\"show\",rawName:\"v-show\",value:(scope.row.is_reception == 1),expression:\"scope.row.is_reception == 1\"}],attrs:{\"type\":\"success\"}},[_vm._v(\"已接待\")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"transfer_account\",\"label\":\"满意度\"}},[[_c('span',[_vm._v(\"-----\")])]],2),_c('el-table-column',{attrs:{\"prop\":\"platform\",\"label\":\"客户端平台\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',[_vm._v(_vm._s(_vm.$getPlatformItem(scope.row.platform).title))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"create_at\",\"label\":\"服务时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.$formatUnixDate(scope.row.create_at, \"YYYY/MM/DD HH:mm:ss\"))+\"\\n      \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"operating\",\"align\":\"center\",\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.openModal(scope)}}},[_vm._v(\"聊天记录\")])]}}])})],1),_c('el-row',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('span',{staticStyle:{\"color\":\"#666\",\"font-size\":\"14px\"}},[_vm._v(\"共找到\"+_vm._s(_vm.tableData.total)+\"条数据\")]),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"sizes, prev, pager, next\",\"current-page\":_vm.tableData.page_on,\"page-sizes\":[5, 10, 15, 20],\"total\":_vm.tableData.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('div',{staticClass:\"dialog-title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('div',{staticStyle:{\"color\":\"#666\"}},[_c('span',{staticStyle:{\"color\":\"#e6a23c\"}},[_vm._v(_vm._s(_vm.serviceNickname(_vm.selectUser.service_account)))]),_vm._v(\"\\n          与\\n        \"),_c('span',{staticStyle:{\"color\":\"#67c23a\"}},[_vm._v(_vm._s(_vm.selectUser.nickname))]),_vm._v(\"\\n        的聊天记录\\n      \")])]),_c('div',{ref:\"chatBody\",staticClass:\"record-modal-chat-box\",attrs:{\"id\":\"chatBody\"}},[_c('ChatsComponent',{attrs:{\"isMessageEnd\":_vm.isMessageEnd,\"seviceId\":_vm.serviceAccount,\"seviceNickname\":_vm.serviceNickname(_vm.selectUser.service_account),\"messages\":_vm.messageRecord.list,\"userId\":_vm.selectUser.user_account,\"userNickname\":_vm.selectUser.nickname,\"onLoadMor\":_vm.onLoadMor,\"loading\":_vm.getMessageRecordLoading}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mini-im-chat-list\"},[_c('div',{staticClass:\"mini-im-chat-message-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"loading\"},[_c('i',{staticClass:\"el-icon-loading\"}),_c('span',[_vm._v(\"消息加载中...\")])]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isMessageEnd),expression:\"isMessageEnd\"}],attrs:{\"type\":\"text\",\"disabled\":\"\",\"icon\":\"el-icon-refresh-right\"}},[_vm._v(\"无更多聊天记录...\")]),(!_vm.isMessageEnd && !_vm.loading)?_c('el-button',{attrs:{\"type\":\"text\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.onLoadMor}},[_vm._v(\"点击加载更多聊天记录\")]):_vm._e()],1),_c('div',{staticClass:\"mini-im-chat-message-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.messages.length <= 0 && !_vm.loading),expression:\"messages.length <= 0 && !loading\"}],staticClass:\"loading\"},[_c('i',{staticClass:\"el-icon-time\"}),_c('span',[_vm._v(\"暂无聊天记录...\")])])]),_vm._l((_vm.messages),function(item,index){return _c('div',{key:index,staticClass:\"mini-im-chat-message-box\",class:{'self': item.from_account != _vm.userId}},[(item.biz_type == 'text' || item.biz_type == 'photo' || item.biz_type == 'knowledge' || item.biz_type == 'knowledge_list')?[_c('div',{staticClass:\"user-date\"},[(item.from_account == _vm.seviceId)?_c('span',[_vm._v(\"\\n              \"+_vm._s(_vm.seviceNickname)+\"\\n            \")]):(item.from_account == _vm.userId)?_c('span',[_vm._v(\"\\n              \"+_vm._s(_vm.userNickname)+\"\\n            \")]):_c('span',[_c('span',{staticStyle:{\"font-size\":\"12px\",\"color\":\"#666\"}},[_vm._v(\"(机器人)\")]),_vm._v(_vm._s(_vm.$robotNickname(item.from_account))+\"\\n            \")]),_c('em',[_vm._v(_vm._s(_vm.$formatFromNowDate(item.timestamp)))])])]:_vm._e(),(item.biz_type == 'text')?[_c('div',{staticClass:\"text\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(item.payload.replace(/\\n/ig, '<br />'))}})])]:_vm._e(),(item.biz_type == 'photo')?[_c('div',{staticClass:\"photo\"},[(item.percent && item.percent != 100)?_c('div',{staticClass:\"loading\"},[_c('i',{staticClass:\"el-icon-loading\"}),_c('span',[_vm._v(_vm._s(item.percent)+\"%\")])]):_vm._e(),_c('div',{staticClass:\"img-content\"},[_c('img',{attrs:{\"src\":item.payload,\"preview\":\"1\"}})])])]:_vm._e(),(item.biz_type == 'transfer')?[_c('div',{staticClass:\"system\"},[_c('span',[_vm._v(_vm._s(item.payload))]),_c('em',[_vm._v(_vm._s(_vm.$formatFromNowDate(item.timestamp)))])])]:_vm._e(),(item.biz_type == 'end')?[_c('div',{staticClass:\"system\"},[(item.to_account != _vm.adminInfo.id)?_c('span',[_vm._v(\"你结束了会话\")]):_c('span',[_vm._v(\"对方结束了会话\")]),_c('em',[_vm._v(_vm._s(_vm.$formatFromNowDate(item.timestamp)))])])]:_vm._e(),(item.biz_type == 'timeout')?[_c('div',{staticClass:\"system\"},[_c('span',[_vm._v(_vm._s(item.payload))]),_c('em',[_vm._v(_vm._s(_vm.$formatFromNowDate(item.timestamp)))])])]:_vm._e(),(item.biz_type == 'cancel')?[_c('div',{staticClass:\"system\"},[(item.from_account == _vm.adminInfo.id)?_c('span',[_vm._v(\"您撤回了一条消息\")]):_c('span',[_vm._v(\"对方撤回了一条消息\")]),_c('em',[_vm._v(_vm._s(_vm.$formatFromNowDate(item.timestamp)))])])]:_vm._e(),(item.biz_type == 'knowledge')?[_c('div',{staticClass:\"knowledge\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"以下是否是您关心的相关问题呢？\")]),_vm._l((JSON.parse(item.payload)),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_vm._v(\"\\n                \"+_vm._s(index+1)+\".\"+_vm._s(item.title)+\"\\n              \")])})],2)])]:_vm._e()],2)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"mini-im-chat-list\">\n\n    <div class=\"mini-im-chat-message-box\">\n      <div class=\"loading\" v-show=\"loading\">\n        <i class=\"el-icon-loading\"></i><span>消息加载中...</span>\n      </div>\n      <el-button v-show=\"isMessageEnd\" type=\"text\" disabled icon=\"el-icon-refresh-right\">无更多聊天记录...</el-button>\n      <el-button v-if=\"!isMessageEnd && !loading\" type=\"text\" @click=\"onLoadMor\" icon=\"el-icon-refresh\">点击加载更多聊天记录</el-button>\n    </div>\n\n    <div class=\"mini-im-chat-message-box\">\n      <div class=\"loading\" v-show=\"messages.length <= 0 && !loading\">\n        <i class=\"el-icon-time\"></i><span>暂无聊天记录...</span>\n      </div>\n    </div>\n\n    <div class=\"mini-im-chat-message-box\" :class=\"{'self': item.from_account != userId}\" v-for=\"(item, index) in messages\" :key=\"index\">\n\n          <!-- 用户信息 -->\n          <template v-if=\"item.biz_type == 'text' || item.biz_type == 'photo' || item.biz_type == 'knowledge' || item.biz_type == 'knowledge_list'\">\n            <div class=\"user-date\">\n              <span v-if=\"item.from_account == seviceId\">\n                {{seviceNickname}}\n              </span>\n              <span v-else-if=\"item.from_account == userId\">\n                {{userNickname}}\n              </span>\n              <span v-else>\n                <span style=\"font-size:12px;color: #666;\">(机器人)</span>{{$robotNickname(item.from_account)}}\n              </span>\n              <em>{{$formatFromNowDate(item.timestamp)}}</em>\n            </div>\n          </template>\n\n          <!-- 文本消息 -->\n          <template v-if=\"item.biz_type == 'text'\">\n            <div class=\"text\">\n              <span v-html=\"item.payload.replace(/\\n/ig, '<br />')\"></span>\n            </div>\n          </template>\n\n          <!-- 图片 -->\n          <template v-if=\"item.biz_type == 'photo'\">\n            <div class=\"photo\">\n              <div class=\"loading\" v-if=\"item.percent && item.percent != 100\">\n                <i class=\"el-icon-loading\"></i>\n                <span>{{item.percent}}%</span>\n              </div>\n              <div class=\"img-content\">\n                <img :src=\"item.payload\" preview=\"1\" />\n              </div>\n            </div>\n          </template>\n\n          <!-- 转接 -->\n          <template v-if=\"item.biz_type == 'transfer'\">\n            <div class=\"system\">\n              <span>{{item.payload}}</span>\n              <em>{{$formatFromNowDate(item.timestamp)}}</em>\n            </div>\n          </template>\n\n          <!-- 结束聊天 -->\n          <template v-if=\"item.biz_type == 'end'\">\n            <div class=\"system\">\n              <span v-if=\"item.to_account != adminInfo.id\">你结束了会话</span>\n              <span v-else>对方结束了会话</span>\n              <em>{{$formatFromNowDate(item.timestamp)}}</em>\n            </div>\n          </template>\n\n           <!-- 聊天超时 -->\n          <template v-if=\"item.biz_type == 'timeout'\">\n            <div class=\"system\">\n              <span>{{item.payload}}</span>\n              <em>{{$formatFromNowDate(item.timestamp)}}</em>\n            </div>\n          </template>\n\n          <!-- 撤回消息 -->\n          <template v-if=\"item.biz_type == 'cancel'\">\n            <div class=\"system\">\n              <span v-if=\"item.from_account == adminInfo.id\">您撤回了一条消息</span>\n              <span v-else>对方撤回了一条消息</span>\n              <em>{{$formatFromNowDate(item.timestamp)}}</em>\n            </div>\n          </template>\n\n          <!-- 知识库列表 -->\n          <template v-if=\"item.biz_type == 'knowledge'\">\n           <div class=\"knowledge\">\n              <div class=\"content\">\n                <div class=\"title\">以下是否是您关心的相关问题呢？</div>\n                <div class=\"item\" :key=\"index\" v-for=\"(item, index) in JSON.parse(item.payload)\">\n                  {{index+1}}.{{item.title}}\n                </div>\n              </div>\n            </div>\n          </template>\n\n    </div>\n\n  </div>\n</template>\n<script>\nexport default {\n  name: \"mini-im-contact\",\n  data() {\n    return {};\n  },\n  computed: {\n    seviceCurrentUser(){\n      return this.$store.getters.seviceCurrentUser || {}\n    },\n    adminInfo(){\n      return this.$store.getters.adminInfo || {}\n    }\n  },\n  props: {\n    loading: Boolean,\n    isMessageEnd: Boolean,\n    messages: Array,\n    userId: String,\n    userNickname: String,\n    seviceId: String,\n    seviceNickname: String,\n    onLoadMor: Function\n  },\n  watch:{\n    messages(){\n     setTimeout(()=>{\n        this.$previewRefresh()\n     }, 1000)\n    }\n  }\n};\n</script>\n<style scoped lang=\"stylus\">\n.mini-im-chat-list {\n  display: flex;\n  flex-direction: column;\n\n  .mini-im-chat-message-box {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 15px;\n\n    .user-date {\n      display: flex;\n      align-items: center;\n      color: #999;\n      font-size: 14px;\n\n      span {\n        color: #666;\n        font-weight: 500;\n        font-size: 14px;\n        padding: 0 5px;\n      }\n\n      em {\n        font-style: normal;\n        font-size 12px\n      }\n    }\n\n    .loading{\n      color #666\n      display: flex;\n      margin-top: 5px;\n      align-items center\n      align-content center\n      justify-content center\n      span{\n        margin-left 5px\n        font-size 13px\n      }\n    }\n\n    .text {\n      display: flex;\n      margin-top: 5px;\n\n      span {\n        max-width: 40%;\n        display: inline;\n        padding: 5px 10px;\n        border-radius: 5px;\n        background-color: #eef4f9;\n        font-size: 14px;\n        color: #666;\n      }\n    }\n\n    .photo {\n      display: flex;\n      margin-top: 5px;\n\n      .loading{\n        align-self flex-end\n        padding 0 5px\n        span{\n          background none !important\n          color: #999 !important\n        }\n      }\n\n      .img-content{\n        border-radius: 5px;\n        width: 200px;\n        overflow hidden\n      }\n\n      img {\n        cursor: pointer;\n        width: 100%;\n        height  100%\n        display: inline;\n      }\n    }\n\n    .knowledge {\n      display: flex;\n      margin-top: 5px;\n      justify-content: flex-end;\n\n      .content {\n        display: flex;\n        flex-direction: column;\n        padding: 5px;\n        border-radius: 5px;\n        color: #666;\n        text-align: left;\n        background-color: #eef4f9;\n\n        .title {\n          font-size: 13px;\n          font-weight: 500;\n        }\n\n        .item {\n          font-size: 13px;\n          line-height: 22px;\n        }\n      }\n    }\n\n    .system {\n      display: flex;\n      margin-top: 5px;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      em{\n        margin-top: 5px;\n        font-size: 12px;\n        color: #999;\n      }\n      span {\n        font-size: 12px;\n        max-width: 50%;\n        min-width: 100px;\n        display: inline;\n        padding: 3px 20px;\n        border-radius: 5px;\n        text-align: center;\n        background-color: #f2f2f2;\n        color: #999;\n      }\n    }\n\n    &.self {\n      text-align: right;\n\n      .user-date {\n        display: flex;\n        justify-content: flex-end;\n\n        span {\n          order: -2;\n        }\n\n        em {\n          order: -3;\n        }\n      }\n\n      .text, .photo {\n        justify-content: flex-end;\n        align-items flex-end\n        .cancel-btn{\n          color #26a2ff\n          font-size 12px\n          margin-right 5px\n          cursor pointer\n        }\n        span {\n          background-color: rgba(33, 150, 243, 0.72);\n          color: #fff;\n          text-align left\n        }\n      }\n\n      .knowledge>.content {\n        background-color: rgba(33, 150, 243, 0.72);\n        color: #fff;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./chats.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./chats.vue?vue&type=template&id=26f02afa&scoped=true&\"\nimport script from \"./chats.vue?vue&type=script&lang=js&\"\nexport * from \"./chats.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chats.vue?vue&type=style&index=0&id=26f02afa&scoped=true&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26f02afa\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"record-page\">\n    <div class=\"record-mini-im-head\">\n      <span>\n        <i class=\"el-icon-time\"></i>\n        <span slot=\"title\">服务记录</span>\n      </span>\n    </div>\n    <el-divider />\n    <div class=\"search\">\n      <el-row :gutter=\"20\">\n        <el-col style=\"width: 120px\">\n          <el-form ref=\"form\" label-width=\"120px\">\n            <el-form-item :label=\"adminInfo.root == 1 ? '按客服：' : '按日期：'\"></el-form-item>\n          </el-form>\n        </el-col>\n        <el-col v-if=\"adminInfo.root == 1\" :span=\"3\">\n          <el-select v-model=\"selectCustomerId\" @change=\"refreshRecord\" placeholder=\"请选择客服\">\n            <el-option\n              v-for=\"item in customerData\"\n              :key=\"item.id\"\n              :label=\"item.nickname\"\n              :value=\"item.id\"\n            ></el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"5.5\">\n          <el-date-picker\n            v-model=\"selectDate\"\n            align=\"right\"\n            type=\"date\"\n            @change=\"refreshRecord\"\n            placeholder=\"选择日期\"\n            :picker-options=\"pickerOptions\">\n          </el-date-picker>\n        </el-col>\n        <el-col :span=\"5.5\">\n          <el-checkbox v-model=\"isDeWeighting\" label=\"去重目标客户\" @change=\"refreshRecord\" border></el-checkbox>\n        </el-col>\n        <el-col :span=\"5.5\">\n          <el-checkbox v-model=\"isReception\" label=\"只显示未接待客户\" @change=\"refreshRecord\" border></el-checkbox>\n        </el-col>\n      </el-row>\n    </div>\n    <el-table :data=\"tableData.list\" v-loading=\"loading\" style=\"width: 100%\">\n       <el-table-column\n        type=\"index\"\n        :index=\"indexMethod\"\n         label=\"#序号\"\n        width=\"60\">\n      </el-table-column>\n      <el-table-column prop=\"service_account\" label=\"接待客服\">\n        <template slot-scope=\"scope\">\n          <span>{{serviceNickname(scope.row.service_account)}}</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"nickname\" label=\"目标客户\">\n         <template slot-scope=\"scope\">\n           <el-tag type=\"success\">{{scope.row.nickname}}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"is_reception\" label=\"是否已接待\">\n         <template slot-scope=\"scope\">\n           <el-tag v-show=\"scope.row.is_reception == 0\" type=\"danger\">未接待</el-tag>\n           <el-tag v-show=\"scope.row.is_reception == 1\" type=\"success\">已接待</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"transfer_account\" label=\"满意度\">\n         <template>\n          <span>-----</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"platform\" label=\"客户端平台\">\n         <template slot-scope=\"scope\">\n          <el-tag>{{$getPlatformItem(scope.row.platform).title}}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"create_at\" label=\"服务时间\">\n         <template slot-scope=\"scope\">\n          {{$formatUnixDate(scope.row.create_at, \"YYYY/MM/DD HH:mm:ss\")}}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"operating\" align=\"center\" label=\"操作\" width=\"150\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" @click=\"openModal(scope)\">聊天记录</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-row type=\"flex\" style=\"margin-top: 20px;\" justify=\"space-between\">\n     <span style=\"color:#666;font-size: 14px;\">共找到{{tableData.total}}条数据</span>\n      <el-pagination\n        background\n         @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        layout=\"sizes, prev, pager, next\"\n        :current-page=\"tableData.page_on\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :total=\"tableData.total\">\n      </el-pagination>\n    </el-row>\n\n\n    <!-- 聊天数据模态框 -->\n    <el-dialog :visible.sync=\"dialogFormVisible\">\n      <div slot=\"title\" class=\"dialog-title\">\n        <div style=\"color: #666\">\n          <span style=\"color: #e6a23c\">{{serviceNickname(selectUser.service_account)}}</span>\n            与\n          <span style=\"color: #67c23a\">{{selectUser.nickname}}</span>\n          的聊天记录\n        </div>\n      </div>\n      <div class=\"record-modal-chat-box\" ref=\"chatBody\" id=\"chatBody\">\n        <ChatsComponent\n          :isMessageEnd=\"isMessageEnd\"\n          :seviceId=\"serviceAccount\"\n          :seviceNickname=\"serviceNickname(selectUser.service_account)\"\n          :messages=\"messageRecord.list\"\n          :userId=\"selectUser.user_account\"\n          :userNickname=\"selectUser.nickname\"\n          :onLoadMor=\"onLoadMor\"\n          :loading=\"getMessageRecordLoading\"/>\n      </div>\n    </el-dialog>\n\n\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nvar moment = require('moment');\nimport ChatsComponent from \"./chats\"\nexport default {\n  name: \"robot\",\n  components:{\n    ChatsComponent\n  },\n  data() {\n    return {\n      loading: true,\n      isDeWeighting: false,\n      isReception: false,\n      selectDate: Date.now(),\n      tableData: {\n        list: [],\n        page_on: 1,\n        page_size: 10,\n        cid: 0,\n        total: 0,\n        is_de_weighting: false,\n        date: \"\",\n      },\n      customerData: [{id:0, nickname: \"全部\"}],\n      selectCustomerId: 0,\n      serviceAccount: \"0\",\n      selectUser: {},\n      pickerOptions: {\n        disabledDate(time) {\n          return time.getTime() > Date.now();\n        },\n        shortcuts: [{\n          text: '今天',\n          onClick(picker) {\n            picker.$emit('pick', new Date());\n          }\n        }, {\n          text: '昨天',\n          onClick(picker) {\n            const date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\n            picker.$emit('pick', date);\n          }\n        }, {\n          text: '一周前',\n          onClick(picker) {\n            const date = new Date();\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', date);\n          }\n        }]\n      },\n      isMessageEnd: false,\n\n      // 模态框数据\n      getMessageRecordLoading: false,\n      getMessageRecordPageSize: 20,\n      dialogFormVisible: false,\n      messageRecord: {\n        list: []\n      },\n       isFirstRequestMessageEnd: false,\n\n\n    };\n  },\n  computed: {\n    platformConfig(){\n      return this.$store.getters.platformConfig\n    },\n    adminInfo(){\n      return this.$store.getters.adminInfo\n    }\n  },\n  created() {\n    this.getAdmins()\n  },\n  mounted(){\n    setTimeout(() =>{\n      this.getRecord(1)\n    }, 1000)\n  },\n  methods: {\n     // 行号\n    indexMethod(index) {\n      return (this.tableData.page_on - 1) * this.tableData.page_size + index +1;\n    },\n     // 改变每页条数\n    handleSizeChange(val) {\n      this.tableData.page_size = val\n      this.getRecord()\n    },\n    // 分页\n    handleCurrentChange(val) {\n      this.tableData.page_on = val\n      this.getRecord()\n    },\n    // 获取客服昵称\n    serviceNickname(id){\n      let nickname = \"\"\n      for(let i =0; i< this.customerData.length; i++){\n        if(this.customerData[i].id == id){\n          nickname = this.customerData[i].nickname\n          break\n        }\n      }\n      return nickname\n    },\n    // 获取数据\n    getAdmins(){\n      axios.post('/admin/list', {page_on: 1, page_size: 100, \"online\": 3})\n      .then(response => {\n           this.customerData = this.customerData.concat(response.data.data.list)\n      })\n      .catch(error => {\n        this.$message.error(error.response.data.message)\n      });\n    },\n    // 获取数据\n    getRecord(index){\n      this.loading = true\n      if(index) this.tableData.page_on = index\n      const {page_on, page_size} = this.tableData\n      axios.post('/services_statistical/list', {\n        page_on,\n        page_size,\n        cid: this.selectCustomerId,\n        date: moment(this.selectDate).format(\"YYYY-MM-DD\"),\n        is_de_weighting: this.isDeWeighting,\n        is_reception: this.isReception\n      })\n      .then(response => {\n        this.loading = false\n        this.tableData = response.data.data\n      })\n      .catch(error => {\n        this.loading = false\n        this.$message.error(error.response.data.message)\n      });\n    },\n    // 刷新记录\n    refreshRecord(){\n      this.getRecord()\n    },\n    // 打开模态框\n    openModal(scope){\n      this.serviceAccount = scope.row.service_account;\n      this.selectUser = scope.row\n      this.isMessageEnd = false\n      this.isFirstRequestMessageEnd = false\n      this.dialogFormVisible = true\n      this.messageRecord = {\n        list: []\n      }\n      this.getMessageRecord()\n    },\n    // 获取聊天记录\n    getMessageRecord(timestamp){\n      this.getMessageRecordLoading = true\n      if(timestamp == undefined){\n        timestamp = 0\n      }\n      axios.post('/message/list', {\n        \"timestamp\": timestamp,\n        \"page_size\": this.getMessageRecordPageSize,\n        \"service\": parseInt(this.serviceAccount),\n        \"account\": parseInt(this.selectUser.user_account)\n      })\n      .then(response => {\n        this.getMessageRecordLoading = false\n        let messages = response.data.data.list\n        for(var i=0; i<messages.length; i++){\n          messages[i].payload = window.Base64.decode(messages[i].payload)\n        }\n        if(messages.length < this.getMessageRecordPageSize){\n          this.isFirstRequestMessageEnd = true\n        }\n        if(messages.length == 0 || timestamp == 0){\n          this.messageRecord = response.data.data\n          this.scrollIntoBottom()\n        }else{\n          response.data.data.list = messages.concat(this.messageRecord.list)\n          this.messageRecord = response.data.data\n        }\n        setTimeout(()=>this.$previewRefresh(), 500)\n      })\n      .catch(error => {\n        console.log(error)\n        this.getMessageRecordLoading = false\n      });\n    },\n     // 获取聊天记录\n    getHistoryMessageRecord(timestamp){\n      this.getMessageRecordLoading = true\n      if(timestamp == undefined || timestamp == 0){\n        this.isMessageEnd = true\n       return\n      }\n      axios.post('/message/history', {\n        \"timestamp\": timestamp,\n        \"page_size\": this.getMessageRecordPageSize,\n        \"service\": parseInt(this.serviceAccount),\n        \"account\": parseInt(this.selectUser.user_account)\n      })\n      .then(response => {\n        let messages = response.data.data.list\n        for(var i=0; i<messages.length; i++){\n          messages[i].payload = window.Base64.decode(messages[i].payload)\n        }\n        this.getMessageRecordLoading = false\n        if(messages.length < this.getMessageRecordPageSize){\n          this.isMessageEnd = true\n        }\n\nresponse.data.data.list = messages.concat(this.messageRecord.list)\n        this.messageRecord = response.data.data\n        setTimeout(()=>this.$previewRefresh(), 1000)\n      })\n      .catch(() => {\n        this.getMessageRecordLoading = false\n      });\n    },\n    // 加载更多数据\n    onLoadMor(){\n      if(this.getMessageRecordLoading) return\n      if(this.isFirstRequestMessageEnd){\n        this.getHistoryMessageRecord(this.messageRecord.list[0].timestamp)\n      }else{\n        this.getMessageRecord(this.messageRecord.list[0].timestamp)\n      }\n      setTimeout(()=>{\n        var chatBody = document.getElementById(\"chatBody\")\n        chatBody.scrollTop = 500\n      }, 50)\n    },\n    // 滚动条置底\n    scrollIntoBottom(){\n      try{\n        setTimeout(()=>{\n          var chatBody = document.getElementById(\"chatBody\")\n          if(!chatBody) return\n          var height = chatBody.clientHeight\n          var scrollHeight = chatBody.scrollHeight\n          chatBody.scrollTop = scrollHeight-height\n        }, 50)\n      }catch(e){\n        console.log(e)\n      }\n    },\n  }\n};\n</script>\n<style lang=\"stylus\">\n  .record-page .record-mini-im-head {\n    height: 30px;\n    display: flex;\n    align-items: center;\n    font-size: 20px;\n    justify-content: space-between;\n    color: #666;\n\n    i {\n      margin-right: 5px;\n    }\n  }\n  .record-page .record-modal-chat-box{\n    height 600px;\n    padding 0 20px\n    overflow hidden\n    overflow-y auto\n  }\n  .record-page .el-dialog__body{\n    padding: 0px;\n    border-top: 1px solid #f7f7f7\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=55197092&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=stylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}